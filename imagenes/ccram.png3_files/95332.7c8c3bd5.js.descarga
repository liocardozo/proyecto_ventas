(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[95332],{88606:(e,a,c)=>{"use strict";var t=c(12897),n=c(96540),o=c(16270);c(74423),c(23792),c(62953);var i=c(34381);c(5556);var s=c(8116),r=c(72831),l=c(46942);c(72712),c(27495),c(25440),c(16280),c(3362);var m=c(89557),d=c(63363),p=c(43461),u=c(62193);c(42762);var _=c(74848),v=c(35421),h=c(79204),b=c(69620);const{getLab:g,API_PATH:y,FALLBACK_URL:f}=s.recommendationsService,x=m({baseURL:f,timeout:3e4,sendCSRFToken:!1}),k="".concat(y,"/combos"),R=e=>({item_id:e.main_info.id,variation_id:e.main_info.variation,quantity:1});var N=e=>{let{text:a,html_tag:c,class_name:t,onClick:n=null,target:i,url:s,id:m}=e;return o("TITLE"===m?"h3":"span",{className:l("".concat(r.namespaceRecommendations,"-label"),{["".concat(r.namespaceRecommendations,"-label__").concat(t)]:t}),onClick:n},void 0,"a"!==c&&s?o("a",{className:"".concat(r.namespaceRecommendations,"-link"),href:s,target:i},void 0,a&&a.trim()):a&&a.trim())};var C,S=(e,a,c)=>"full_icon"===e?c("recommendations-full_icon","".concat(a,"-icon__shipping-fullfilment")):null;const z=/{([\s\S]+?)}/g;var O=e=>{let{values:a,text:c,styles:i,class_name:s,html_tag:m,onClick:d,url:p,id:v,target:h,IconFactory:b}=e;if(u(a))return o(N,{text:c,styles:i,class_name:s,html_tag:m,onClick:d,href:p,id:v,target:h});const g=c.split(z);for(let e=0;e<g.length;e+=1){const c=g[e];if(Object.prototype.hasOwnProperty.call(a,c)){const n=a[c];switch(n.type){case"ICON":g[e]=S(n.icon_id,r.namespaceRecommendations,b);break;case"break":g[e]=C||(C=o("br",{}));break;default:g[e]=_.jsx(N,t({},n))}}else""!==c&&(g[e]=n.createElement(N,{text:c}))}return o("p",{className:l("".concat(r.namespaceRecommendations,"-label"),{["".concat(r.namespaceRecommendations,"-label__").concat(s)]:s})},void 0,g)};const w={",":"comma",".":"dot"},T=e=>{let{bold:a,className:c,from:t,original_value:n,cross_outed_price:i,discount:m,subtitle:d,installments:u,priceSizeOverride:v,decimalSeparator:h}=e;const b={symbol:n.currency_symbol,currencyId:n.currency_id,fraction:n.text,cents:n.decimal},{priceSize:g}=s.priceSizeByDigits(b,v);return o("div",{className:l("".concat(r.namespaceRecommendations,"-price-container"),c,{["".concat(r.namespaceRecommendations,"-price__").concat(n.class_name)]:n.class_name})},void 0,i&&o(p,{value:{fraction:i.text,cents:i.decimal},symbol:i.currency_symbol,currencyId:i.currency_id,centsType:w[h],className:l("".concat(r.namespaceRecommendations,"-price__original-value")),size:(null==v?void 0:v.original)||12,previous:!0,compact:!0}),t&&O(t),o("div",{className:l("".concat(r.namespaceRecommendations,"-price"),{["".concat(r.namespaceRecommendations,"-price--bold")]:a})},void 0,o(p,{value:{fraction:b.fraction,cents:b.cents},symbol:b.symbol,currencyId:b.currencyId,centsType:"superscript",size:g,compact:!0}),m&&o("span",{className:l("".concat(r.namespaceRecommendations,"-price__discount"))},void 0,m&&_.jsx(_.Fragment,{children:O(m)}))),d&&o("div",{className:"".concat(r.namespaceRecommendations,"-price__subtitle")},void 0,O(d)),u&&o("div",{className:"".concat(r.namespaceRecommendations,"-price__installments")},void 0,O(u)))};T.defaultProps={bold:!1,className:null,from:null,original_value:null,cross_outed_price:null,discount:null,subtitle:null,installments:null,decimalSeparator:null,priceSizeOverride:null};var I=T;const j=e=>{let{classname:a,main_info:c,components:n,checkbox:i,device:s,target:m,handleClickCheckbox:p,priceSizeOverride:u,IconFactory:v}=e;const{disabled:h,checked:b}=i;return o("div",{className:l("".concat(r.namespaceRecommendations,"-card"),{["".concat(a)]:a}),animated:!1},void 0,o("div",{className:"".concat(r.namespaceRecommendations,"-card-content")},void 0,o(d,{disabled:h,className:"".concat(r.namespaceRecommendations,"__checkbox"),checked:b,onChange:e=>{p(e,c.id)},autoComplete:"off"}),o("div",{className:"".concat(r.namespaceRecommendations,"-card__components-container")},void 0,o("div",{className:"".concat(r.namespaceRecommendations,"-card__components")},void 0,n&&n.map((e=>(e=>{var a,n;switch(e.id.toLowerCase()){case"shipping":return _.jsx(O,t({class_name:"shipping",IconFactory:v},e));case"price":return _.jsx(I,t(t({},e),{},{priceSizeOverride:u,decimalSeparator:null!==(a=null==c||null===(n=c.prices)||void 0===n?void 0:n.decimal_separator)&&void 0!==a?a:"."}));default:return N(t(t({},e),{},{target:m}))}})(e)))),"mobile"===s&&o("div",{className:"".concat(r.namespaceRecommendations,"__chevron-container")},void 0,o("div",{className:"".concat(r.namespaceRecommendations,"__chevron")},void 0,v("recommendations-chevron","".concat(r.namespaceRecommendations,"__icon chevron-down")))))))};j.defaultProps={classname:"",components:[],item_settings:{},main_info:{},preload:!1,checkbox:{},lowEnd:!1,target:void 0,device:""};var L=j;const F=e=>{let{state:a,setState:c,createEventData:n,device:i,siteId:l,handleClick:m,showChevron:d,calculate:p,footer:u,priceSizeOverride:v,IconFactory:h}=e;const b=(e,a)=>{let{main_info:{prices:c}}=a;return e+(c?c.price:0)},y=(e,a)=>{const c=a.filter((e=>e.checkbox.checked)),n=c.reduce(b,0),o=u.components.find((e=>"price--total"===e.class_name)),i=u.actions.find((e=>"ADD-TO-CART"===e.type)),s=c.length+1,r=(e,a)=>{const c=/(\d+)/g;return e<=1?a.label_singular.replace(c,s):a.label_plural.replace(c,s)};if(o){const a=b(n,e);o.price.original_price.value=((e,a)=>{let{main_info:{prices:c}}=a;return Math.floor(e).toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g,(e=>"".concat(e).concat(c.thousand_separator||".")))})(a,e),o.price.original_price.decimal=function(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const c=e.toFixed(2).split(".")[1];return"00"!==c||a?c:""}(a),o.label=r(s,o)}return i&&(i.label=r(s,i)),t({},u)},f=(e,o)=>{const{checked:i}=e.target,r=a.combos.map((e=>(e.main_info.id===o&&(e.checkbox=t(t({},e.checkbox),{},{checked:i})),e)));c(t(t({},a),{},{combos:r}));return s.TrackService.checkedCombo(n("checked")),p?m(y(a.item,r)):((e,a,c)=>{const t=a.filter((e=>e.checkbox.checked)).map(R),n=g(""),o=n?"&env=".concat(n):"";return x.post("/".concat(k,"/total-price?site_id=").concat(c).concat(o),{headers:{"Content-Type":"application/json"},data:{item:R(e),selected:t}})})(a.item,r,l).then((e=>{let{data:a}=e;return m(a.footer)})).catch((()=>{}))};return o("div",{className:"".concat(r.namespaceRecommendations,"-card-container")},void 0,a&&a.item&&_.jsx(L,t(t({target:"_blank",device:i},a.item),{},{priceSizeOverride:v,IconFactory:h})),a&&a.combos&&a.combos.map((e=>_.jsx(L,t({target:"_blank",showChevron:d,device:i,handleClickCheckbox:f,priceSizeOverride:v,IconFactory:h},e)))))};class A extends n.Component{constructor(e){super(e),this.state={mounted:!1}}componentDidMount(){this.setState({mounted:!0})}render(){const{lazyLoad:e,src:a,width:c,height:t,src2x:n,alt:i,meta:s,className:r}=this.props,{mounted:l}=this.state;return o("div",{className:"".concat(r,"__container")},void 0,s&&o("meta",{itemProp:"image",content:a}),e&&!l?o("div",{className:r}):o(v.Image,{src:a,className:r,width:c,height:t,alt:i,srcSet:n?"".concat(a," 1x, ").concat(n," 2x"):null}))}}A.defaultProps={size:null,src2x:null,title:null,meta:!1};var D=A;const E=e=>{let{state:a,gallery:c,device:t,imageConfig:n}=e;const i="mobile"===t&&a&&a.combos.length>2?"figure-main-reduced":"figure-main";return o("div",{className:"".concat(r.namespaceRecommendations,"-gallery")},void 0,o("figure",{className:"".concat(r.namespaceRecommendations,"-gallery__").concat(i)},void 0,o(D,{className:"".concat(r.namespaceRecommendations,"-gallery__image"),src:c&&c.main.picture.url,alt:c&&c.main.picture.alt,height:c&&c.main.picture.height,width:c&&c.main.picture.width,lazyLoad:null==n?void 0:n.lazyload})),c.selected&&c.selected.map((e=>_.jsxs(_.Fragment,{children:[o("span",{className:"".concat(r.namespaceRecommendations,"-gallery__plus")},void 0,"+"),o("figure",{className:"".concat(r.namespaceRecommendations,"-gallery__").concat(i)},void 0,o("a",{href:e.permalink,target:"_blank",rel:"noreferrer"},void 0,o(D,{className:"".concat(r.namespaceRecommendations,"-gallery__image"),src:e&&e.picture.url,alt:e.picture.alt,height:e&&e.picture.height,width:e&&e.picture.width,lazyLoad:null==n?void 0:n.lazyload},"".concat(e.id,"--image"))))]}))))},P=function(){let e=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0).toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g,(a=>"".concat(a).concat(e)))},q=function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0).toString();return e.length>1?e:"0".concat(e)},B=e=>{let{original_price:a,original_value:c,decimal:t,discount:n,priceSizeOverride:i}=e;return _.jsxs(_.Fragment,{children:[a&&o(p,{value:{fraction:P(a.value,".")||0,cents:a.decimal?q(a.decimal):null},symbol:a.currency_symbol,currencyId:a.currency_id,centsType:"superscript",size:(null==i?void 0:i.price)||16,compact:!0}),c&&o(p,{value:{fraction:c.text,cents:t},symbol:c.currency_symbol,currencyId:c.currency_id,centsType:"superscript",size:(null==i?void 0:i.price)||16,compact:!0}),n&&o("span",{className:"".concat("ui-combos-label","__discount")},void 0,n.text.trim())]})},M=e=>{let{components:a,priceSizeOverride:c,className:n}=e;return o("div",{className:"".concat(n,"__shipping")},void 0,a&&a.map((e=>o("span",{className:"".concat(n,"__").concat(e.class_name)},e.type,o("span",{className:"".concat(n,"-label")},void 0,e.label||e.label_plural,e.shipping&&o("span",{className:"".concat(n,"-label-shipping")},void 0,e.shipping),":"),e.price&&_.jsx(B,t({priceSizeOverride:c},e.price)),e.extra_data&&o("span",{className:"".concat(n,"__").concat(e.class_name,"__extra-data")},void 0,e.extra_data)))))},U=e=>{let{actions:a,size:c,className:t}=e;return o("div",{className:"".concat(t,"__actions")},void 0,a&&a.map((e=>o(h.Button,{className:e.class_name,hierarchy:e.hierarchy,size:c,type:"submit"},e.type,o("span",{},void 0,e.label||e.label_plural)))))};var H=e=>{let{apiResponse:a,size:c,device:d,priceSizeOverride:p,IconFactory:u,shouldRaiseErrors:v,showVariationsError:h,className:b}=e;const{title:g,gallery:y,footer:f,track:x,classname:k,calculate:N,site_id:C,variation_id:S,image_config:z,recommendation_info:O}=a,{recommendations:w}=O,[T,I]=n.useState({item:w&&w[0],combos:w&&w.filter((e=>{var a;return!(null!=e&&null!==(a=e.classname)&&void 0!==a&&a.includes("ui-combos-card-feature"))}))}),j="red",[L,A]=n.useState(y),[D,P]=n.useState(f),[q,B]=n.useState(null),H=e=>{P(t({},e))},K=e=>{if(!e)return{};const a=e.components.find((e=>"PRICE"===e.type));return{currency_id:a.currency_symbol,price:a.original_value.text,item:{id:e.main_info.id,category_id:e.main_info.category_id,variation:e.main_info.variation},quantity:1}},V=()=>{const e=T.combos.filter((e=>e.checkbox.checked)),a=e.map(K),c=y.selected.filter((a=>e.find((e=>e.main_info.id===a.id))));A(t(t({},y),{},{selected:c}));return{event_data:{backend_id:x.event_data.backend_id,client:x.event_data.client,item:T.item.main_info.id,variation:T.item.main_info.variation,items:a,quantity:a.length+1},experiment:x.experiment,experiments:x.experiments}};return n.useEffect((()=>{I({item:w&&w[0],combos:w&&w.filter((e=>{var a;return!(null!=e&&null!==(a=e.classname)&&void 0!==a&&a.includes("ui-combos-card-feature"))}))}),A(y),P(f)}),[S,f,y,w]),_.jsxs(_.Fragment,{children:[o("div",{className:l(r.namespaceCombos,b,k)},void 0,o("form",{onSubmit:e=>{e.preventDefault();const a=document.querySelector('meta[name="csrf-token"]');a?a.content:console.log("no existe meta csrf-token"),v&&(h(d,"APPLAY"),"desktop"!==d)||((e,a)=>{const c=a.filter((e=>e.checkbox.checked)).map(R);return m({baseURL:"",maxRedirects:0,method:"post",responseType:"json",sendCSRFToken:!0,timeout:25e3}).post("".concat("/p/api/combos","/add-to-cart"),{headers:{"Content-Type":"application/json"},data:{item:R(e),selected:c}})})(T.item,T.combos).then((e=>{let{data:a}=e;s.TrackService.addToCartCombo(V()),window.location=a.cart_url})).catch((e=>{var a;a=e.response.data.displayMessage,B({text:a,type:j}),setTimeout((()=>{B(null)}),3e3)}))},action:"p/api/combos/add-to-cart",method:"POST"},void 0,o("h2",{className:"".concat(r.namespaceRecommendations,"__title")},void 0,g),L&&o(E,{state:T,gallery:L,device:d,imageConfig:z}),o("div",{className:"".concat(r.namespaceRecommendations,"-container")},void 0,(Y=d,o(F,{state:T,setState:I,createEventData:V,siteId:C,handleClick:H,device:d,showChevron:"mobile"===Y,footer:f,calculate:N,priceSizeOverride:p,IconFactory:u})),D&&o("div",{className:"".concat(r.namespaceRecommendations,"-footer")},void 0,D.components&&o(M,{components:D.components,priceSizeOverride:p,className:"".concat(r.namespaceRecommendations,"-footer")}),D.actions&&o(U,{actions:D.actions,size:c,className:"".concat(r.namespaceRecommendations,"-footer")}))))),q&&q.text&&o(i.Snackbar,{delay:3e3,message:q.text,color:q.type,show:!0})]});var Y};const K={price:18,discount:12,installments:14,original:12};var V=e=>_.jsx(H,t({device:"desktop",size:"medium",priceSizeOverride:K},e));const Y={price:16,discount:12,installments:14,original:12};var G=e=>_.jsx(H,t({device:"mobile",size:"large",priceSizeOverride:Y},e));var J=e=>a=>{let c=Object.assign({},(b(a),a));const{apiResponse:o}=c,{track:i}=o,l=n.useRef();return s.useTrackRecommendations({combosContainerRef:l,trackData:i,shouldTrackOnView:!0,trackingFunction:s.TrackService.viewCombos}),_.jsx("section",{id:i.event_data.client,ref:l,className:"".concat(r.namespaceCombos,"-wrapper-ref"),children:_.jsx(e,t({},c))})};var Q=class{static addToCart(e,a,c,n){const o={item_id:e.body.item_id,site_id:e.body.site_id||e.body.item_id.substring(0,3),context:e.body.context||"recommendations",quantity:e.body.quantity||"1",user_id:e.user.id,flow_type:"mercadolibre",mode:"page"},i=t(t(t(t({},a.locals.restclient.params),e.params),e.query),{},{user_id:e.user.id,"caller.id":e.user.id,site_id:e.body.site_id||e.body.item_id.substring(0,3),item_id:e.body.item_id}),{headers:s}=a.locals.restclient;return n.post("/frontend/carts/items/add",{data:o,params:i,headers:s,context:c})}};const W=J(V),X=J(G);a.RecommendationsAddToCart=Q,a.RecommendationsCombosDesktop=W,a.RecommendationsCombosMobile=X},95332:(e,a,c)=>{e.exports=c(88606)},72831:(e,a)=>{"use strict";const c="ui-recommendations",t="".concat(c,"-comparator"),n="".concat(c,"-combos"),o="".concat(c,"-coupon");a.namespaceCombos=n,a.namespaceComparator=t,a.namespaceCoupon=o,a.namespaceRecommendations=c},69620:e=>{e.exports=function(e){if(null==e)throw new TypeError("Cannot destructure "+e)},e.exports.__esModule=!0,e.exports.default=e.exports}}]);
//# sourceMappingURL=95332.7c8c3bd5.js.map